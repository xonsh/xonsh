language: python
matrix:
    include:
        - os: linux
          python: "nightly"
        - os: linux
          language: generic
          env: PYTHON="3.4" MINICONDA_OS="Linux"
        - os: linux
          language: generic
          env: PYTHON="3.5" MINICONDA_OS="Linux"
        - os: osx
          language: generic
          env: PYTHON="3.4" MINICONDA_OS="MacOSX"
        - os: osx
          language: generic
          env: PYTHON="3.5" MINICONDA_OS="MacOSX"

install:
  - if [[ "$TRAVIS_PYTHON_VERSION" == "nightly" ]]; then
      pip install -r requirements-tests.txt;
    fi;
    python3 setup.py install;

script:
  - if [[ "$TRAVIS_PYTHON_VERSION" = "nightly" ]]; then
      XONSH_DEBUG=1 python3 -m pytest --flake8 --cov=xonsh --timeout=10;
    else
      python3 -m pytest --timeout=10;
    fi

after_success:
  - if [[ "$TRAVIS_PYTHON_VERSION" = "nightly" ]]; then
      codecov;
    fi
