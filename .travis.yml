language: python

cache: pip

matrix:
    include:
        - os: linux
          python: "nightly"
        - os: linux
          python: 3.5
          env: COMPLETERUN=true
        - os: linux
          python: 3.4
        - os: osx
          language: generic

install:
  - if [[ $TRAVIS_OS_NAME == 'osx' ]]; then brew update         ; fi
  - if [[ $TRAVIS_OS_NAME == 'osx' ]]; then brew install python3; fi
  - pip3 install -r requirements-tests.txt

script:
  - if [ $COMPLETERUN = true ]; then
      py.test --flake8 --cov=. --cov-report=term --timeout=10;
    else
      py.test --timeout=10;
    fi

after_success:
  - if [ $COMPLETERUN = true ]; then codecov; fi
