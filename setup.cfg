# We don't intend to have different pytest --flake8 rules from flake8 at cli.
# someday, remove the redundant section.
# however, pytest-flake8, as of 1.0.5, does not support flake8-excludes,
# and flake8, as of 3.7.9, does try to process parser_table.py even if you ignore ALL, and effectively hangs cli.
# So we must use flake8-ignore, and so it must have all the ignore rules.
[tool:pytest]
flake8-max-line-length = 180
flake8-ignore =
    # File excludes:
    # pytest-flake8, at least
    __amalgam__.py ALL
    # we don't care about sphinx autogenerated files
    docs/*.py ALL
    # we don't care about ply files?
    ply/*.py ALL
    # these run VERY slowly and give tons of errors
    parser*_table.py ALL
    
    *.py E122
    *.py E203           # E203 whitespace before ':'
    *.py E402
    *.py W503           # line break before binary operators is a good thing
    *.py E731           # lambdas assigned to variables are OK by us.

[flake8]
max-line-length = 180
# apparently pytest-flake8 does some magic with ignore <file> ALL?  But flake8 itself does not, and hangs on big files.
# hence ignore ALL from pytest-flake8 transmogrified into exclude.  Sadly, pytest-flake8 does not support exclude (yet).
exclude =
    __amalgam__.py
    parser*_table.py    # these run VERY slowly and give tons of errors
    build
    docs                # we don't care about sphinx autogenerated files 
    ply                 # we don't care about sphinx autogenerated files 
ignore =
    *.py E122
    *.py E203           # E203 whitespace before ':'
    *.py E402
    *.py W503           # line break before binary operators is a good thing
    *.py E731           # lambdas assigned to variables are OK by us.
